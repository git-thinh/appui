<html>
<head>
    <script type="text/javascript">
        function load(url, type) {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', url, false);
            xhr.send(null);
            if (type == 'text') return xhr.responseText;
            return JSON.parse(xhr.responseText);
        }

    </script>
</head>
<body>
    <script type="text/javascript">
        var CHANNEL_MESSAGE, API;

        CHANNEL_MESSAGE  = new MessageChannel();

        //var apiJS = load('https://raw.githubusercontent.com/git-thinh/appui/master/api.js', 'text');
        var apiJS = load('http://localhost:60000/api.js', 'text');        
        var blob = new Blob([apiJS]);
        var blobURL = window.URL.createObjectURL(blob);

        API = new Worker(blobURL);
        API.postMessage('CONNECT', [CHANNEL_MESSAGE.port1]);


    </script>
</body>
</html>